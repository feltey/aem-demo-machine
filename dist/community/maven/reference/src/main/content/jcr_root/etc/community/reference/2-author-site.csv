# Title: Install Community Site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Description: This option creates the Community Site template and the Community Site for Geometrixx Communities,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Configuring the AEM Communities Publish Tunnel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/system/console/configMgr/com.adobe.cq.social.user.impl.transport.HttpToPublisher,apply,TRUE,action,ajaxConfigManager,$location,,enable,TRUE,enable,FALSE,agent.configuration,/etc/replication/agents.author/publish,disabled.cipher.suites,,enabled.cipher.suites,,propertylist,"enable,agent.configuration,disabled.cipher.suites,enabled.cipher.suites",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Making room for the future Community Site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingDelete,/content/sites/communities,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# The following lines are creating the Community Site Template (6.2 then 6.1 if 6.2 is not possible),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteTemplate,/content.social.json,templateName,Reference Demo Site,description,Reference Site Template for Demos that contains one instance of each of the community functions,enabled,on,functions,"{""functions"":[{""title"":""Activities"",""url"":""activities"",""configuration"":[{""id"":""allowMyActivities"",""value"":""true""},{""id"":""allowNewsFeed"",""value"":""true""},{""id"":""allowAllActivities"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/activitystream""},{""title"":""Trending"",""url"":""trending"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""},{""title"":""Forum"",""url"":""forum"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/forum""},{""title"":""Files"",""url"":""files"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/filelibrary""},{""title"":""Catalog"",""url"":""catalog"",""configuration"":[{""id"":""tagNamespaces"",""value"":[""/etc/tags/geometrixx-outdoors""]}],""function"":""/etc/community/templates/functions/reference/catalog""},{""title"":""Assignments"",""url"":""assignments"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/assignments""},{""function"":""/etc/community/templates/functions/reference/blog"",""title"":""Blog"",""url"":""blog"",""configuration"":[{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true}]},{""function"":""/etc/community/templates/functions/reference/qna"",""title"":""Questions"",""url"":""questions"",""configuration"":[{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true}]},{""function"":""/etc/community/templates/functions/reference/calendar"",""title"":""Calendar"",""url"":""calendar"",""configuration"":[{""id"":""allowTagging"",""value"":true}]},{""title"":""Groups"",""url"":""groups"",""configuration"":[{""id"":""groupTemplates"",""value"":[""/etc/community/templates/groups/reference/reference-group-workspace-site"",""/etc/community/templates/groups/reference/reference-group-forum-site""]}],""function"":""/etc/community/templates/functions/reference/groups""},{""title"":""Page"",""url"":""page"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""}]}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteTemplate,/content.social.json,templateName,Reference Demo Site,description,Reference Site Template for Demos that contains one instance of each of the community functions,enabled,on,functions,"{""functions"":[{""title"":""Activities"",""url"":""activities"",""configuration"":[{""id"":""allowMyActivities"",""value"":""true""},{""id"":""allowNewsFeed"",""value"":""true""},{""id"":""allowAllActivities"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/activitystream""},{""title"":""Forum"",""url"":""forum"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/forum""},{""title"":""Files"",""url"":""files"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/filelibrary""},{""title"":""Groups"",""url"":""groups"",""configuration"":[{""id"":""groupTemplates"",""value"":[""/etc/community/templates/groups/reference/reference-group-workspace-site"",""/etc/community/templates/groups/reference/reference-group-forum-site""]}],""function"":""/etc/community/templates/functions/reference/groups""},{""title"":""Page"",""url"":""page"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""}]}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# The following lines are creating new Community Sites,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Site,/content.social.json,name,Geometrixx Communities,jcr:description,Reference Community site,dns,communities.geometrixx.com,urlName,communities,blueprint,/etc/community/templates/sites/custom/reference_demo_site ,theme,/etc/designs/community/sitethemes/bootstrap-united/clientlibs ,allowUserRegistration,TRUE,allowAnonymousAccess,TRUE,allowPrivateMessaging,TRUE,allowFacebook,TRUE,fbconnectoauthid,/etc/cloudservices/facebookconnect/geometrixx-outdoorsfacebookapp/jcr:content ,allowTwitter,TRUE,twitterconnectoauthid,/etc/cloudservices/twitterconnect/geometrixx-outdoors-twitter-app/jcr:content ,moderators,/social/authors/aaron.mcdonald@mailinator.com,moderateContent,FALSE,tagNameSpaces,/etc/tags/geometrixx-outdoors ,groupEnablementManagers,/social/authors/jason.werner@dodgit.com ,groupAdmin,/social/authors/aaron.mcdonald@mailinator.com,createGroupPermission,COMMUNITY_GROUP_ADMINISTRATORS ,pagebanner,banner120.jpg,baseLanguage,en,allowMachineTranslation,TRUE,availableLanguages,en,availableLanguages,fr,availableLanguages,de,availableLanguages,es,persistTranslation,TRUE,translatePageOrSection,TRANSLATE_SELECTION,pagethumbnail,communities.jpg,macOrgId,5584D36B545258440A4C98A7@AdobeOrg,enableAnalytics,TRUE,analyticsCloudConfigPath,/etc/cloudservices/sitecatalyst/demomachine/demomachine
# Updating a few components with new settings,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/sites/communities/en/forum/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/sites/communities/en/groups/hiking/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/sites/communities/en/groups/hiking/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/sites/communities/en/groups/surfing/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Setting the privileged member group on Blogs and Calendar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteUpdate,communities,en,functions,"{""functions"":[{""title"":""Activities"",""url"":""activities"",""origUrl"":""activities"",""configuration"":[{""id"":""allowMyActivities"",""value"":""true""},{""id"":""allowAllActivities"",""value"":""true""},{""id"":""allowNewsFeed"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/activitystream""},{""title"":""Trending"",""url"":""trending"",""origUrl"":""trending"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""},{""title"":""Forum"",""url"":""forum"",""origUrl"":""forum"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/forum""},{""title"":""Files"",""url"":""files"",""origUrl"":""files"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/filelibrary""},{""title"":""Catalog"",""url"":""catalog"",""origUrl"":""catalog"",""configuration"":[{""id"":""tagNamespaces"",""value"":[""/etc/tags/geometrixx-outdoors""]}],""function"":""/etc/community/templates/functions/reference/catalog""},{""title"":""Assignments"",""url"":""assignments"",""origUrl"":""assignments"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/assignments""},{""title"":""Blog"",""url"":""blog"",""origUrl"":""blog"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/aem-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/blog""},{""title"":""Questions"",""url"":""questions"",""origUrl"":""questions"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/qna""},{""title"":""Calendar"",""url"":""calendar"",""origUrl"":""calendar"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/aem-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/calendar""},{""title"":""Groups"",""url"":""groups"",""origUrl"":""groups"",""configuration"":[{""id"":""groupTemplates"",""value"":[""/etc/community/templates/groups/reference/reference-group-workspace-site"",""/etc/community/templates/groups/reference/reference-group-forum-site""]}],""function"":""/etc/community/templates/functions/reference/groups""},{""title"":""Page"",""url"":""page"",""origUrl"":""page"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""}]} ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"# The following lines are adding ""activity components"" to the trending page",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending1,activityType,views,displayCount,5,displayTitle,Top Visitors,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,members,contextPath,/content/sites/communities/en,isAggregate,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending1/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending2,activityType,posts,displayCount,5,displayTitle,Top Contributors,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,members,contextPath,/content/sites/communities/en,isAggregate,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending2/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending3,activityType,views,displayCount,5,displayTitle,Top Content,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,content,contextPath,/content/sites/communities/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending3/cq:responsive/default,width,6,behavior,newline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending4,activityType,posts,displayCount,5,displayTitle,Trending Content,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,content,contextPath,/content/sites/communities/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/trending/jcr:content/content/primary/trending4/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Assigning a few role based badges,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Badge,/home/users/geometrixx-outdoors/aaron.mcdonald%40mailinator.com/profile.social.json,badgeContentPath,/etc/community/badging/images/moderator/jcr:content/moderator.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# The following line is adding the ck.plugin.codesnippet entry to the clientlibs for the codesnippet plugin to work on this specific forum instance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/communities/en/forum/jcr:content/clientlibslist,scg:requiredClientLibs@String[],cq.ckeditor|cq.social.hbs.voting|cq.social.hbs.forum|cq.social.hbs.signup|cq.social.hbs.breadcrumbs|ck.plugin.codesnippet|personalization.core.kernel|personalization.clientcontext.kernel|personalization.stores.kernel|personalization.kernel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Republishing the site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SitePublish,/content/sites/communities/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,